<html lang="zh-Hans"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Installing on IIS server · Verdaccio</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Installing on IIS server · Verdaccio"/><meta property="og:type" content="website"/><meta property="og:url" content="http://www.verdaccio.org/index.html"/><meta property="og:description" content="These instructions were written for Windows Server 2012, IIS 8, [Node.js 0.12.3](https://nodejs.org/), [iisnode 0.2.16](https://github.com/tjanczuk/iisnode) and [verdaccio 2.1.0](https://github.com/verdaccio/verdaccio)."/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="http://www.verdaccio.org/blog/atom.xml" title="Verdaccio Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="http://www.verdaccio.org/blog/feed.xml" title="Verdaccio Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/verdaccio-tiny.png"/><h2 class="headerTitle">Verdaccio</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/zh-Hans/installation.html" target="_self">Docs</a></li><li><a href="/zh-Hans/help.html" target="_self">Help</a></li><li><a href="/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/en">English</a></li><li><a href="/es-ES">Español</a></li><li><a href="/pt-BR">Português (Brasil)</a></li><li><a href="/zh-Hans">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Server</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/what-is-verdaccio.html">What is Verdaccio?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/cli.html">Command Line Tool</a></li></ul></div><div class="navGroup navGroupActive"><h3>Configuration</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/configuration.html">Configuration File</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/uplinks.html">Uplinks</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/packages.html">Package Access</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/authentification.html">Authentification</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/notifications.html">Notifications</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/logger.html">Logger</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/webui.html">Web User Interface</a></li></ul></div><div class="navGroup navGroupActive"><h3>Server</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/server-configuration.html">Server Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/reverse-proxy.html">Reverse Proxy Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/ssl.html">Set up the SSL Certificates</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/windows.html">Installing As a Windows Service</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/zh-Hans/iss-server.html">Installing on IIS server</a></li></ul></div><div class="navGroup navGroupActive"><h3>Plugins</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/plugins.html">Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/dev-plugins.html">Developing Plugins</a></li></ul></div><div class="navGroup navGroupActive"><h3>DevOps</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/docker.html">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/kubernetes.html">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/ansible.html">Installing with Ansible</a></li></ul></div><div class="navGroup navGroupActive"><h3>Development</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/build.html">Build the source code</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/contributing.html">Contributing Verdaccio</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/source-code.html">Source Code</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/unit-testing.html">Unit Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/node-api.html">Node API</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zh-Hans/protect-your-dependencies.html">Protecting packages</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Installing on IIS server</h1></header><article><div><span><p>These instructions were written for Windows Server 2012, IIS 8, <a href="https://nodejs.org/">Node.js 0.12.3</a>, <a href="https://github.com/tjanczuk/iisnode">iisnode 0.2.16</a> and <a href="https://github.com/verdaccio/verdaccio">verdaccio 2.1.0</a>.</p>
<ul>
<li><p>Install IIS Install <a href="https://github.com/tjanczuk/iisnode">iisnode</a>. Make sure you install prerequisites (Url Rewrite Module &amp; node) as explained in the instructions for iisnode.</p></li>
<li><p>Create a new folder in Explorer where you want to host verdaccio. For example <code>C:\verdaccio</code>. Save <a href="https://github.com/verdaccio/verdaccio/wiki/Installing-on-IIS-server#packagejson">package.json</a>, <a href="https://github.com/verdaccio/verdaccio/wiki/Installing-on-IIS-server#startjs">start.js</a> and <a href="https://github.com/verdaccio/verdaccio/wiki/Installing-on-IIS-server#webconfig">web.config</a> in this folder.</p></li>
<li><p>Create a new site in Internet Information Services Manager. You can name it whatever you want. I'll call it verdaccio in these <a href="http://www.iis.net/learn/manage/configuring-security/application-pool-identities">instructions</a>. Specify the path to where you saved all files and a port number.</p></li>
<li><p>Go back to Explorer and give the user that runs the application pool modify rights to the folder you just created. If you've named the new site verdaccio and did not change the app pool, it's running under an ApplicationPoolIdentity and you should give the user IIS AppPool\verdaccio modify rights see instructions if you need help. (You can restrict access later if you want so that it only has modify rights on the iisnode and verdaccio\storage)</p></li>
<li><p>Start a command prompt and execute the commands below to download verdaccio:</p>
<p>cd c:\verdaccio
npm install</p></li>
</ul>
<ul>
<li>Make sure you have an inbound rule accepting TCP traffic to the port in Windows Firewall</li>
<li>Thats it! Now you can navigate to the host and port that you specified</li>
</ul>
<p>I wanted the <code>verdaccio</code> site to be the default site in IIS so I did the following:</p>
<ul>
<li>I made sure the .npmrc file in <code>c:\users{yourname}</code> had the registry set to <code>&quot;registry=http://localhost/&quot;</code></li>
<li>I stopped the &quot;Default Web Site&quot; and only start the site &quot;verdaccio&quot; site in IIS</li>
<li>I set the bindings to &quot;http&quot;, ip address &quot;All Unassigned&quot; on port 80, ok any warning or prompts</li>
</ul>
<p>These instructions are based on <a href="https://gist.github.com/HCanber/4dd8409f79991a09ac75">Host Sinopia in IIS on Windows</a>. I had to tweak my web config as per below but you may find the original from the for mentioned link works better</p>
<p>A default configuration file will be created <code>c:\verdaccio\verdaccio\config.yaml</code></p>
<h3><a class="anchor" aria-hidden="true" name="packagejson"></a><a href="#packagejson" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>package.json</h3>
<pre><code class="hljs css json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"iisnode-verdaccio"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Hosts verdaccio in iisnode"</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"start.js"</span>,
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"verdaccio"</span>: <span class="hljs-string">"^2.1.0"</span>
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="startjs"></a><a href="#startjs" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>start.js</h3>
<pre><code class="hljs css bash">process.argv.push(<span class="hljs-string">'-l'</span>, <span class="hljs-string">'unix:'</span> + process.env.PORT);
require(<span class="hljs-string">'./node_modules/verdaccio/src/lib/cli.js'</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="webconfig"></a><a href="#webconfig" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web.config</h3>
<pre><code class="hljs css xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">system.webServer</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">remove</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"WebDAVModule"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- indicates that the start.js file is a node.js application
    to be handled by the iisnode module --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">handlers</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">remove</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"WebDAV"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"iisnode"</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"start.js"</span> <span class="hljs-attr">verb</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">modules</span>=<span class="hljs-string">"iisnode"</span> <span class="hljs-attr">resourceType</span>=<span class="hljs-string">"Unspecified"</span> <span class="hljs-attr">requireAccess</span>=<span class="hljs-string">"Execute"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"WebDAV"</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">verb</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">modules</span>=<span class="hljs-string">"WebDAVModule"</span> <span class="hljs-attr">resourceType</span>=<span class="hljs-string">"Unspecified"</span> <span class="hljs-attr">requireAccess</span>=<span class="hljs-string">"Execute"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">handlers</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">rewrite</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">rules</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- iisnode folder is where iisnode stores it's logs. These should
        never be rewritten --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rule</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"iisnode"</span> <span class="hljs-attr">stopProcessing</span>=<span class="hljs-string">"true"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"iisnode*"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"None"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Rewrite all other urls in order for verdaccio to handle these --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rule</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"verdaccio"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">match</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"/*"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"Rewrite"</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"start.js"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">rules</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">rewrite</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- exclude node_modules directory and subdirectories from serving
    by IIS since these are implementation details of node.js applications --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">security</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">requestFiltering</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">hiddenSegments</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">segment</span>=<span class="hljs-string">"node_modules"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">hiddenSegments</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">requestFiltering</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">security</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">system.webServer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="windows.html">← Installing As a Windows Service</a><a class="docs-next button" href="plugins.html">Plugins →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/verdaccio-blackwhite.png" alt="Verdaccio" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-Hans/installation.html">Getting Started</a><a href="/docs/zh-Hans/docker.html">Docker</a><a href="/docs/zh-Hans/configuration.html">Configuration</a></div><div><h5>Community</h5><a href="/zh-Hans/users.html">User Showcase</a><a href="https://stackoverflow.com/search?q=verdaccio" target="_blank">Stack Overflow</a><a href="https://gitter.im/verdaccio">Project Chat</a><a href="https://twitter.com/verdaccio_npm" target="_blank"><img alt="Follow Verdaccio on Twitter" src="https://img.shields.io/twitter/follow/verdaccio_npm.svg?label=Follow+Verdaccio&amp;style=social"/></a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/verdaccio">GitHub</a><a class="github-button" href="https://github.com/verdaccio/verdaccio" data-icon="octicon-star" data-count-href="/verdaccio/verdaccio/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-2527438-21', 'auto');
              ga('send', 'pageview');
            </script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
              var search = docsearch({
                apiKey: 'a8b4d117e513cd8d71d6a95e3d9d4a91',
                indexName: 'verdaccio',
                inputSelector: '#search_input_react'
              });
            </script></body></html>